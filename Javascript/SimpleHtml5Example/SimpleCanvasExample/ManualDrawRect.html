<!-- 
  HTML5 Canvas is used to draw grapics on they fly via Javascript
  In this example, it would load a image into canvas for editing
-->
<html>
	<head>
		<script>
			function findxy(res, e) {
				if (res == 'down') {
					prevX = currX;
					prevY = currY;
					currX = e.clientX - canvas.offsetLeft;
					currY = e.clientY - canvas.offsetTop;
			
					flag = true;
					dot_flag = true;
					if (dot_flag) {
						ctx.beginPath();
						ctx.fillStyle = x;
						ctx.fillRect(currX, currY, 2, 2);
						ctx.closePath();
						dot_flag = false;
					}
				}
				if (res == 'up' || res == "out") {
					flag = false;
				}
				if (res == 'move') {
					if (flag) {
						prevX = currX;
						prevY = currY;
						currX = e.clientX - canvas.offsetLeft;
						currY = e.clientY - canvas.offsetTop;
						draw();
					}
				}
			}
		
			document.onreadystatechange = function () {
				var canvas = document.getElementById("canvasEditor");
				var ctx = canvas.getContext("2d");
				


				canvas.addEventListener("mousemove", function (e) {
					findxy('move', e)
				}, false);
				canvas.addEventListener("mousedown", function (e) {
					findxy('down', e)
				}, false);
				canvas.addEventListener("mouseup", function (e) {
					findxy('up', e)
				}, false);
				canvas.addEventListener("mouseout", function (e) {
					findxy('out', e)
				}, false);

				
			};
		</script>
	</head>
	
	<body>
		<canvas id="canvasEditor">
		
		</canvas>
	</body>
</html>